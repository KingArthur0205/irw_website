---
title: "Data"
---

{{< include _load-data.qmd >}}

Below we show metadata for the entire IRW, an example dataset, and illustrations of how to access the data programmatically. You can also explore the data [here](https://redivis.com/datasets/as2e-cv7jb41fd/tables).

## Metadata

<iframe width="800" height="500" allowfullscreen src="https://redivis.com/embed/tables/bdomingu.irw_meta:bdxt:current.metadata:h5gs#cells" style="border:0;"></iframe>

## Individual dataset

```{ojs}
function createDatasetMap(df) {
  let datasetMap = new Map();

  // Convert column-based object into an array of row objects
  let dataArray = Array.from({ length: df[Object.keys(df)[0]].length }, (_, i) => {
    return Object.fromEntries(Object.entries(df).map(([key, values]) => [key, values[i]]));
  });

  // Populate the Map using filename as the key
  for (let row of dataArray) {
    datasetMap.set(row.dataset_name, row); // Ensure 'filename' exists in the metadata
  }

  return datasetMap;
}

// Convert metadata table into datasetMap
dataset_map = createDatasetMap(metadata);

// Dropdown selector for dataset
viewof dataset = Inputs.select(dataset_map, { label: 'Dataset' });

// Function to find dataset name from the Map
function findDatasetNameFromMap(map, selectedDataset) {
  for (let [key, value] of map.entries()) {
    if (value === selectedDataset) {
      return key;
    }
  }
  return null;
}

// Look up the name of the dataset and construct the URL
dataset_name = findDatasetNameFromMap(dataset_map, dataset);
dataset_url = `https://redivis.com/embed/tables/datapages.item_response_warehouse:as2e:current.${dataset_name}`;

html`<iframe id="myIframe" width="800" height="500" allowfullscreen style="border:0;" src = "${dataset_url}"></iframe>`
```

## Programmatic access

You can also access IRW data programmatically using the Redivis API for [R](https://apidocs.redivis.com/client-libraries/redivis-r) or [Python](https://apidocs.redivis.com/client-libraries/redivis-python) (**note** that you will first need to [generate and set an API token](https://apidocs.redivis.com/client-libraries/redivis-r/getting-started)). For example:

::: {.panel-tabset}
## R

```{r}
#| eval: false
#| echo: true

# first install redivis package: devtools::install_github("redivis/redivis-r", ref="main")

# individual dataset
dataset <- redivis::user("datapages")$dataset("item_response_warehouse")
df <- dataset$table("4thgrade_math_sirt")$to_tibble()

```

## Python

```{python}
#| eval: false
#| echo: true
#| python.reticulate: false
import redivis

# individual dataset
dataset = redivis.user('datapages').dataset('item_response_warehouse')
df = dataset.table('4thgrade_math_sirt').to_pandas_dataframe()

```
:::
